<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Login Token</title>
  <script type="module">
    import { checkToken } from "./js/firebase.js";

    async function submitToken() {
      const kode = document.getElementById("tokenInput").value.trim();
      if (!kode) return alert("Masukkan token dulu!");

      const result = await checkToken(kode);

      if (!result.valid) {
        alert(result.reason);
      } else {
        const nextTab = result.data.currentTab || 1;
        window.location.href = `tab${nextTab}.html?token=${kode}`;
      }
    }

    window.submitToken = submitToken;
  </script>
</head>
<body>
  <h2>Masukkan Token Undangan</h2>
  <input id="tokenInput" type="text" placeholder="Token (document ID)">
  <button onclick="submitToken()">Submit</button>
</body>
</html>
